@page "/manage-blogs"

<div class="container">
    <div class="d-flex justify-content-between align-items-center">
        <h3> Manage Blog posts</h3>
        <NavLink href="/manage-blogs/save-post" class="btn btn-primary">Add another blog post</NavLink>

    </div>
    <hr />
    <table class="table">
        <thead>
            <tr>
                <th>No.</th>
                <th>Title</th>
                <th>Short description</th>
                <th>Language</th>
                <th>Date Published</th>
                <th>Author</th>
            </tr>
        </thead>
        <tbody>
            @if (loading)
            {
                <tr>
                    <td colspan="4" class="text-center">
                        Loading posts...
                    </td>
                </tr>
            }
            else if (!loading && posts is null)
            {
                <tr>
                    <td colspan="4" class="text-center">
                        No blog posts found.
                        <NavLink href="/manage-blogs/save-post" class="btn btn-primary">Create first blog post</NavLink>
                    </td>
                </tr>
            }
            else
            {
                int sno = 1;
                foreach (var post in posts)
                {
                    var editPostLink = $"/manage-blogs/edit-post/{post.Id}";
                    <tr>
                        <td>@(sno++)</td>
                        <td>@post.Title</td>
                        <td>@post.ShortDescription</td>
                        <td>@post.Language</td>
                        <td>@post.DatePublished</td>
                        <td>@post.AuthorFirstName @post.AuthorLastName</td>
                        <td>
                            <NavLink href="@editPostLink" class="btn btn-default btn-sm">Edit</NavLink>
                        </td>
                    </tr>
                }

            }
        </tbody>
    </table>
</div>